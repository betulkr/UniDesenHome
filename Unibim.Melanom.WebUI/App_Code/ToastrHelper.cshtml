@helper ProcessToastrs()
{
List<(DateTime Date, int SessionId, Unibim.Melanom.WebUI.Models.Toastr.Toastr Toastr)> toastrs = Unibim.Melanom.WebUI.Models.Toastr.ToastrService.ReadAndRemoveUserQueue();

if (toastrs != null && toastrs.Count > 0)
{
    foreach (var item in toastrs)
    {
            @ShowToastr(item.Toastr)
        }
    }
}

@helper ShowToastr(Unibim.Melanom.WebUI.Models.Toastr.Toastr item)
{

switch (item.Type)
{
    case Unibim.Melanom.WebUI.Models.Toastr.ToastrType.Info:
            @ToastrInfo(item.Message, item.Title)
        break;
    case Unibim.Melanom.WebUI.Models.Toastr.ToastrType.Success:
            @ToastrSuccess(item.Message, item.Title)
        break;
    case Unibim.Melanom.WebUI.Models.Toastr.ToastrType.Warning:
            @ToastrWarning(item.Message, item.Title)
        break;
    case Unibim.Melanom.WebUI.Models.Toastr.ToastrType.Error:
            @ToastrError(item.Message, item.Title)
            break;
        default:
            @ToastrInfo(item.Message, item.Title)
            break;
    }
}

@helper ToastrInfo(string message, string title)
{
    <script>
        toastr.info('@message', '@title');
    </script>
}

@helper ToastrWarning(string message, string title)
{
    <script>
        toastr.warning('@message', '@title');
    </script>
}

@helper ToastrSuccess(string message, string title)
{
    <script>
        toastr.success('@message', '@title');
    </script>
}

@helper ToastrError(string message, string title)
{
    <script>
        toastr.error('@message', '@title');
    </script>
}
